<img ng-src="/thumbnails/{{ cmsCtrl.formProject.thumbnailId || thumbnail.dataUrl || 'default.png' }}" 
       style="width:100%; height:100%; max-width:100px;">

<div ng-controller="UploadController as uploadCtrl">
  <form ng-submit="submitThumbnail();">
    <label>Change thumbnail
      <input type="file" file-model="file.upload" name="projThumbnail" ng-disabled="uploadingThumb" 
             onchange="angular.element(this).scope().thumbnailChanged(this.files)">
      <!--<input type="file" file-input="file" name="thumbnail" ng-disabled="uploadingThumb" 
             onchange="angular.element(this).scope().thumbnailChanged(this.files)">-->
    </label>
    <button ng-disabled="uploadingThumb" type="submit">Save</button>
    <button ng-click="cancelThumbnailUpload()" type="reset">Cancel</button>
    <span>Allowed formats: .png, .jpg</span>
  </form>

  <div ng-show="thumbnailMessage">
    <div ng-class="alert">{{ thumbnailMessage }}</div>
  </div>
</div>
<!--<div ng-show="uploadingThumb" class="progress">grab a progress bar from bootstrap</div>-->

<br/>
<br/>

<div>
  <label>New project</label>
  <input type="text" ng-model="cmsCtrl.formProject.title"/>
</div>
<div class="fields">
  <div>
    <label>Category</label>
    <input type="text" ng-model="cmsCtrl.formProject.category"/>
  </div>
  <div>
    <label>Description</label>
    <input type="text" ng-model="cmsCtrl.formProject.description"/>
  </div>
  <div>
    <label>Address</label>
    <input type="text" ng-model="cmsCtrl.formProject.address"/>
  </div>
</div>
<div class="fields">
  <div>
    <label>City</label>
    <input type="text" ng-model="cmsCtrl.formProject.city"/>
  </div>
  <div>
    <label>Country</label>
    <input type="text" ng-model="cmsCtrl.formProject.country"/>
  </div>
  <div>
    <label>Start Date</label>
    <select ng-model="cmsCtrl.formProject.startYear" ng-options="year for year in cmsCtrl.years">
                                                             <!--year.id as year.value for year in years-->
      <option value="" disabled>Select year</option>
    </select>
  </div>
</div>
<div class="fields">
  <div>
    <label>End Date</label>
    <select ng-model="cmsCtrl.formProject.endYear" ng-options="year for year in cmsCtrl.years">
      <option value="" disabled>Select year</option>
    </select>
  </div>
  <div>
    <label>Gross Area</label>
    <input type="number" step="0.01" ng-model="cmsCtrl.formProject.grossArea" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/"/>
  </div>
  <div>
    <label>Floor Area</label>
    <input type="number" step="0.01" ng-model="cmsCtrl.formProject.floorArea" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/"/>
  </div>
</div>
<div class="fields">
  <div>
    <label>Company Name</label>
    <input type="text" ng-model="cmsCtrl.formProject.company"/>
  </div>
  <div>
    <label>Company Url</label>
    <input type="text" ng-model="cmsCtrl.formProject.companyUrl"/>
  </div>
  <div>
    <label>Participation</label>
    <input type="text" ng-model="cmsCtrl.formProject.participation"/>
  </div>
</div>

<a href ng-click="cmsCtrl.addImages()">Add images</a>
<div ng-if="cmsCtrl.formProject.images.length">
  <label>Images</label>
  <ul>
    <li ng-repeat="image in cmsCtrl.formProject.images">
      <img ng-src="/portfolio/{{ image.name }}.png" 
       style="width:100%; height:100%; max-width:100px;">
      <span>{{image.caption}}</span>
      <a href ng-click="cmsCtrl.editCaption(image._id)"> Edit </a>
      <a href ng-click="cmsCtrl.deleteImage($index)"> Delete </a>
    </li>
  </ul>
</div>

<pre>{{ project | json }} </pre>
<button ng-click="cmsCtrl.submit(cmsCtrl.formProject)">Save</button>
<button ng-click="cmsCtrl.cancel()">Cancel</button>